"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;e=u,t=i,r=s,n=!0,a=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_reactAddonsPureRenderMixin=require("react-addons-pure-render-mixin"),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_reactAddonsCssTransitionGroup=require("react-addons-css-transition-group"),_reactAddonsCssTransitionGroup2=_interopRequireDefault(_reactAddonsCssTransitionGroup),_classnames2=require("classnames"),_classnames3=_interopRequireDefault(_classnames2),_DropdownMenuItems=require("./DropdownMenuItems"),_DropdownMenuItems2=_interopRequireDefault(_DropdownMenuItems),TAB=9,DropdownMenu=function(e){function t(e){var r=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClickOutside=function(e){for(var t=_reactDom2["default"].findDOMNode(r),n=e.target;n.parentNode;){if(n===t)return;n=n.parentNode}r.props.closeMenu()},this.handleKeyDown=function(e){if(r.props.closeOnInsideClick){var t=e.which||e.keyCode;if(t===TAB){var n=_reactDom2["default"].findDOMNode(r.refs.menuItems).querySelectorAll(".dd-menu-item"),o=e.shiftKey?0:n.length-1;e.target===n[o]&&r.props.closeMenu()}}},this.shouldComponentUpdate=_reactAddonsPureRenderMixin2["default"].shouldComponentUpdate.bind(this),this.lastWindowClickEvent=null}return _inherits(t,e),_createClass(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isOpen,n=t.closeOnOutsideClick;r!==e.isOpen&&(r&&!e.isOpen?n&&(this.lastWindowClickEvent=this.handleClickOutside,document.addEventListener("click",this.lastWindowClickEvent)):!r&&e.isOpen&&n&&(document.removeEventListener("click",this.lastWindowClickEvent),this.lastWindowClickEvent=null))}},{key:"componentWillUnmount",value:function(){this.lastWindowClickEvent&&document.removeEventListener("click",this.lastWindowClickEvent)}},{key:"render",value:function(){var e,t=this.props,r=t.isOpen,n=t.menuAlign,o=t.align,i=t.inverse,s=t.className,a=t.toggleComponent,l=t.items,u=(0,_classnames3["default"])((e={"dd-menu":!0},_defineProperty(e,"dd-menu-"+(n||o),!0),_defineProperty(e,"dd-menu-inverse",i),_defineProperty(e,"className",s),e)),c=this.props,p=c.textAlign,d=c.upwards,m=c.animAlign,_=c.animate,f=c.enterTimeout,y=c.leaveTimeout,v={transitionName:"grow-from-"+(d?"up-":"")+(m||o),className:"dd-menu-items",onKeyDown:this.handleKeyDown,transitionEnter:_,transitionLeave:_,transitionEnterTimeout:f,transitionLeaveTimeout:y},h={key:"dropdownItems",className:(0,_classnames3["default"])("dd-menu-items-"+(p||o),{"dd-items-upwards":d}),items:l,enterTimeout:f,leaveTimeout:y,closeOnInsideClick:this.props.closeOnInsideClick,closeMenu:this.props.closeMenu};return _react2["default"].createElement("div",{className:u},a,_react2["default"].createElement(_reactAddonsCssTransitionGroup2["default"],v,r&&_react2["default"].createElement(_DropdownMenuItems2["default"],h)))}}],[{key:"propTypes",value:{isOpen:_react.PropTypes.bool.isRequired,closeMenu:_react.PropTypes.func.isRequired,toggleComponent:_react.PropTypes.node.isRequired,inverse:_react.PropTypes.bool,align:_react.PropTypes.string,animAlign:_react.PropTypes.string,textAlign:_react.PropTypes.string,menuAlign:_react.PropTypes.string,className:_react.PropTypes.string,upwards:_react.PropTypes.bool,animate:_react.PropTypes.bool,enterTimeout:_react.PropTypes.number,leaveTimeout:_react.PropTypes.number,closeOnInsideClick:_react.PropTypes.bool,closeOnOutsideClick:_react.PropTypes.bool,items:_react.PropTypes.arrayOf(_react.PropTypes.shape({children:_react.PropTypes.node,onClick:_react.PropTypes.func,unrenders:_react.PropTypes.bool,className:_react.PropTypes.string,isSeparator:_react.PropTypes.bool}))},enumerable:!0},{key:"defaultProps",value:{inverse:!1,align:"center",upwards:!1,animate:!0,enterTimeout:150,leaveTimeout:150,closeOnInsideClick:!0,closeOnOutsideClick:!0},enumerable:!0}]),t}(_react.Component);exports["default"]=DropdownMenu,module.exports=exports["default"];