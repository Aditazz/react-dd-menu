"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},_reactAddons=require("react/addons"),_reactAddons2=_interopRequireDefault(_reactAddons),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),CSSTransitionGroup=_reactAddons2["default"].addons.CSSTransitionGroup,TAB=9,SPACEBAR=32,_lastWindowClickEvent=null,DropdownMenu=function(a){function b(a){_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a)}return _inherits(b,a),_createClass(b,[{key:"componentDidUpdate",value:function(a,b){var c=_reactAddons2["default"].findDOMNode(this.refs.menuItems);this.props.isOpen&&!a.isOpen?(_lastWindowClickEvent=this.handleClickOutside.bind(this),document.addEventListener("click",_lastWindowClickEvent),c.addEventListener("click",this.props.close),c.addEventListener("onkeydown",this.close.bind(this))):!this.props.isOpen&&a.isOpen&&(document.removeEventListener("click",_lastWindowClickEvent),c.removeEventListener("click",this.props.close),c.removeEventListener("onkeydown",this.close.bind(this)),_lastWindowClickEvent=null)}},{key:"componentWillUnmount",value:function(){_lastWindowClickEvent&&document.removeEventListener("click",_lastWindowClickEvent)}},{key:"close",value:function(a){var b=a.which||a.keyCode;b===SPACEBAR&&this.props.close(),a.preventDefault()}},{key:"handleClickOutside",value:function(a){var b=_reactAddons2["default"].findDOMNode(this).getElementsByTagName("*");for(var c in b)if(a.target==b[c])return;this.props.close(a)}},{key:"handleKeyDown",value:function(a){var b=a.which||a.keyCode;if(b===TAB){var c=_reactAddons2["default"].findDOMNode(this).querySelectorAll("button,a"),d=a.shiftKey?1:c.length-1;a.target==c[d]&&this.props.close(a)}}},{key:"render",value:function(){var a=this.props,b=a.isOpen,c=a.toggle,d=a.className,e=a.inverse,f=a.align,g=a.animAlign,h=a.textAlign,i=a.menuAlign,j=a.children,k=_classnames2["default"]("dd-menu","dd-menu-"+(i||f),{"dd-menu-inverse":e},d),l="dd-items-"+(h||f),m={transitionName:"grow-from-"+(g||f),component:"div",className:"dd-menu-items",onKeyDown:this.handleKeyDown.bind(this),ref:"menuItems"};return _reactAddons2["default"].createElement("div",{className:k},c,_reactAddons2["default"].createElement(CSSTransitionGroup,m,b&&_reactAddons2["default"].createElement("ul",{className:l},j)))}}]),b}(_reactAddons.Component);DropdownMenu.propTypes={isOpen:_reactAddons.PropTypes.bool.isRequired,close:_reactAddons.PropTypes.func.isRequired,toggle:_reactAddons.PropTypes.node.isRequired,inverse:_reactAddons.PropTypes.bool,align:_reactAddons.PropTypes.oneOf(["center","right","left"]),animAlign:_reactAddons.PropTypes.oneOf(["center","right","left"]),textAlign:_reactAddons.PropTypes.oneOf(["center","right","left"]),menuAlign:_reactAddons.PropTypes.oneOf(["center","right","left"]),className:_reactAddons.PropTypes.string},DropdownMenu.defaultProps={inverse:!1,align:"center",animAlign:null,textAlign:null,menuAlign:null,className:null},exports["default"]=DropdownMenu,module.exports=exports["default"];