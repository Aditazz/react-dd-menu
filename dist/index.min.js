"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,s=n;a=u=l=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;e=u,t=i,n=s,r=!0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_reactAddonsCssTransitionGroup=require("react-addons-css-transition-group"),_reactAddonsCssTransitionGroup2=_interopRequireDefault(_reactAddonsCssTransitionGroup),_reactAddonsPureRenderMixin=require("react-addons-pure-render-mixin"),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),TAB=9,SPACEBAR=32,ALIGNMENTS=["center","right","left"],MENU_SIZES=["sm","md","lg","xl"],DropdownMenu=function(e){function t(e){var n=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._lastWindowClickEvent=null,this.close=function(e){var t=e.which||e.keyCode;t===SPACEBAR&&(n.props.close(),e.preventDefault())},this.handleClickOutside=function(e){for(var t=_reactDom2["default"].findDOMNode(n),r=e.target;r.parentNode;){if(r===t)return;r=r.parentNode}n.props.close(e)},this.handleKeyDown=function(e){var t=e.which||e.keyCode;if(t===TAB){var r=_reactDom2["default"].findDOMNode(n).querySelectorAll("button,a"),o=e.shiftKey?1:r.length-1;e.target==r[o]&&n.props.close(e)}},this.shouldComponentUpdate=_reactAddonsPureRenderMixin2["default"].shouldComponentUpdate.bind(this)}return _inherits(t,e),_createClass(t,[{key:"componentDidUpdate",value:function(e,t){if(this.props.isOpen!==e.isOpen){var n=_reactDom2["default"].findDOMNode(this).querySelector(".dd-menu > .dd-menu-items");this.props.isOpen&&!e.isOpen?(this._lastWindowClickEvent=this.handleClickOutside,document.addEventListener("click",this._lastWindowClickEvent),n.addEventListener("click",this.props.close),n.addEventListener("onkeydown",this.close)):!this.props.isOpen&&e.isOpen&&(document.removeEventListener("click",this._lastWindowClickEvent),n.removeEventListener("click",this.props.close),n.removeEventListener("onkeydown",this.close),this._lastWindowClickEvent=null)}}},{key:"componentWillUnmount",value:function(){this._lastWindowClickEvent&&document.removeEventListener("click",this._lastWindowClickEvent)}},{key:"render",value:function(){var e=this.props,t=e.menuAlign,n=e.align,r=e.inverse,o=e.size,i=e.className,s=_classnames2["default"]("dd-menu","dd-menu-"+(t||n),{"dd-menu-inverse":r},i,o?"dd-menu-"+o:null),a=this.props,l=a.textAlign,u=a.upwards,c=a.animAlign,p=a.animate,d=a.enterTimeout,m=a.leaveTimeout,_="dd-items-"+(l||n),f={transitionName:"grow-from-"+(u?"up-":"")+(c||n),component:"div",className:_classnames2["default"]("dd-menu-items",{"dd-items-upwards":u}),onKeyDown:this.handleKeyDown,transitionEnter:p,transitionLeave:p,transitionEnterTimeout:d,transitionLeaveTimeout:m};return _react2["default"].createElement("div",{className:s},this.props.toggle,_react2["default"].createElement(_reactAddonsCssTransitionGroup2["default"],f,this.props.isOpen&&_react2["default"].createElement("ul",{key:"items",className:_},this.props.children)))}}],[{key:"propTypes",value:{isOpen:_react.PropTypes.bool.isRequired,close:_react.PropTypes.func.isRequired,toggle:_react.PropTypes.node.isRequired,inverse:_react.PropTypes.bool,align:_react.PropTypes.oneOf(ALIGNMENTS),animAlign:_react.PropTypes.oneOf(ALIGNMENTS),textAlign:_react.PropTypes.oneOf(ALIGNMENTS),menuAlign:_react.PropTypes.oneOf(ALIGNMENTS),className:_react.PropTypes.string,size:_react.PropTypes.oneOf(MENU_SIZES),upwards:_react.PropTypes.bool,animate:_react.PropTypes.bool,enterTimeout:_react.PropTypes.number,leaveTimeout:_react.PropTypes.number},enumerable:!0},{key:"defaultProps",value:{inverse:!1,align:"center",animAlign:null,textAlign:null,menuAlign:null,className:null,size:null,upwards:!1,animate:!0,enterTimeout:150,leaveTimeout:150},enumerable:!0},{key:"MENU_SIZES",value:MENU_SIZES,enumerable:!0},{key:"ALIGNMENTS",value:ALIGNMENTS,enumerable:!0}]),t}(_react.Component);module.exports=DropdownMenu;var NestedDropdownMenu=function(e){function t(e){var n=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._closeCallback=null,this.open=function(){n._closeCallback&&(clearTimeout(n._closeCallback),n._closeCallback=null),n.setState({isOpen:!0})},this.close=function(){n._closeCallback=setTimeout(function(e){n.setState({isOpen:!1})}.bind(n),n.props.delay)},this.shouldComponentUpdate=_reactAddonsPureRenderMixin2["default"].shouldComponentUpdate.bind(this),this.state={isOpen:!1}}return _inherits(t,e),_createClass(t,[{key:"componentWillUnmount",value:function(){this._closeCallback&&clearTimeout(this._closeCallback)}},{key:"render",value:function(){var e=this.props,t=e.toggle,n=e.children,r=e.nested,o=e.animate,i=e.direction,s=e.upwards,a=e.enterTimeout,l=e.leaveTimeout,u=this.state.isOpen,c={className:_classnames2["default"]("nested-dd-menu","nested-"+r),onMouseOver:this.open,onMouseLeave:this.close,onFocus:this.open,onBlur:this.close},p=s?"up-":"",d={className:"dd-item-ignore",transitionEnter:o,transitionLeave:o,transitionName:"grow-from-"+p+i,transitionEnterTimeout:a,transitionLeaveTimeout:l};return _react2["default"].createElement("li",c,t,_react2["default"].createElement(_reactAddonsCssTransitionGroup2["default"],d,u?_react2["default"].createElement("ul",{key:"items"},n):null))}}],[{key:"propTypes",value:{toggle:_react.PropTypes.node.isRequired,nested:_react.PropTypes.oneOf(["inherit","reverse","left","right"]),animate:_react.PropTypes.bool,direction:_react.PropTypes.oneOf(["left","right"]),upwards:_react.PropTypes.bool,delay:_react.PropTypes.number,enterTimeout:_react.PropTypes.number,leaveTimeout:_react.PropTypes.number},enumerable:!0},{key:"defaultProps",value:{nested:"reverse",animate:!1,direction:"right",upwards:!1,delay:500,enterTimeout:150,leaveTimeout:150},enumerable:!0}]),t}(_react.Component);module.exports.NestedDropdownMenu=NestedDropdownMenu;