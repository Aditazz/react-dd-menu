"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_get=function(e,t,n){for(var o=!0;o;){var r=e,s=t,i=n;a=l=d=void 0,o=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var d=a.get;return void 0===d?void 0:d.call(i)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=s,n=i,o=!0}},_reactAddons=require("react/addons"),_reactAddons2=_interopRequireDefault(_reactAddons),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),CSSTransitionGroup=_reactAddons2["default"].addons.CSSTransitionGroup,TAB=9,SPACEBAR=32,_lastWindowClickEvent=null,DropdownMenu=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"componentDidUpdate",value:function(e,t){var n=_reactAddons2["default"].findDOMNode(this.refs.menuItems);this.props.isOpen&&!e.isOpen?(_lastWindowClickEvent=this.handleClickOutside.bind(this),document.addEventListener("click",_lastWindowClickEvent),n.addEventListener("click",this.props.close),n.addEventListener("onkeydown",this.close.bind(this))):!this.props.isOpen&&e.isOpen&&(document.removeEventListener("click",_lastWindowClickEvent),n.removeEventListener("click",this.props.close),n.removeEventListener("onkeydown",this.close.bind(this)),_lastWindowClickEvent=null)}},{key:"componentWillUnmount",value:function(){_lastWindowClickEvent&&document.removeEventListener("click",_lastWindowClickEvent)}},{key:"close",value:function(e){var t=e.which||e.keyCode;t===SPACEBAR&&this.props.close(),e.preventDefault()}},{key:"handleClickOutside",value:function(e){for(var t=e.target,n=_reactAddons2["default"].findDOMNode(this);t.parentNode;){if(t===n)return;t=t.parentNode}this.props.close(e)}},{key:"handleKeyDown",value:function(e){var t=e.which||e.keyCode;if(t===TAB){var n=_reactAddons2["default"].findDOMNode(this).querySelectorAll("button,a"),o=e.shiftKey?1:n.length-1;e.target==n[o]&&this.props.close(e)}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.toggle,o=e.className,r=e.inverse,s=e.align,i=e.animAlign,a=e.textAlign,d=e.menuAlign,l=e.children,c=e.size,u=e.upwards,p=_classnames2["default"]("dd-menu","dd-menu-"+(d||s),{"dd-menu-inverse":r},o,c?"dd-menu-"+c:null),f="dd-items-"+(a||s),m={transitionName:"grow-from-"+(u?"up-":"")+(i||s),component:"div",className:_classnames2["default"]("dd-menu-items",{"dd-items-upwards":u}),onKeyDown:this.handleKeyDown.bind(this),ref:"menuItems"};return _reactAddons2["default"].createElement("div",{className:p},n,_reactAddons2["default"].createElement(CSSTransitionGroup,m,t&&_reactAddons2["default"].createElement("ul",{className:f},l)))}}]),t}(_reactAddons.Component);DropdownMenu.propTypes={isOpen:_reactAddons.PropTypes.bool.isRequired,close:_reactAddons.PropTypes.func.isRequired,toggle:_reactAddons.PropTypes.node.isRequired,inverse:_reactAddons.PropTypes.bool,align:_reactAddons.PropTypes.oneOf(["center","right","left"]),animAlign:_reactAddons.PropTypes.oneOf(["center","right","left"]),textAlign:_reactAddons.PropTypes.oneOf(["center","right","left"]),menuAlign:_reactAddons.PropTypes.oneOf(["center","right","left"]),className:_reactAddons.PropTypes.string,size:_reactAddons.PropTypes.oneOf(["sm","md","lg","xl"]),upwards:_reactAddons.PropTypes.bool},DropdownMenu.defaultProps={inverse:!1,align:"center",animAlign:null,textAlign:null,menuAlign:null,className:null,size:null,upwards:!1},exports["default"]=DropdownMenu;var NestedDropdownMenu=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isOpen:!1}}return _inherits(t,e),_createClass(t,[{key:"setOpen",value:function(e){this.setState({isOpen:e})}},{key:"render",value:function(){var e=this.props,t=e.toggle,n=e.children,o=e.nested,r=e.animate,s=e.direction,i=this.state.isOpen,a={className:_classnames2["default"]("nested-dd-menu","nested-"+o),onMouseOver:this.setOpen.bind(this,!0),onMouseLeave:this.setOpen.bind(this,!1),onFocus:this.setOpen.bind(this,!0),onBlur:this.setOpen.bind(this,!1)},d={className:"dd-item-ignore",transitionEnter:r,transitionLeave:r,transitionName:"grow-from-"+s};return _reactAddons2["default"].createElement("li",a,t,_reactAddons2["default"].createElement(CSSTransitionGroup,d,i?_reactAddons2["default"].createElement("ul",{key:"items"},n):null))}}]),t}(_reactAddons.Component);NestedDropdownMenu.propTypes={toggle:_reactAddons.PropTypes.node.isRequired,nested:_reactAddons.PropTypes.oneOf(["inherit","reverse","left","right"]),animate:_reactAddons.PropTypes.bool,direction:_reactAddons.PropTypes.oneOf(["left","right"])},NestedDropdownMenu.defaultProps={nested:"reverse",animate:!1,direction:"right"},exports.NestedDropdownMenu=NestedDropdownMenu;